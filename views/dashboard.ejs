<%- include('./includes/head.ejs') %>

    <link rel="stylesheet" type="text/css" href="assets/vendor/apexcharts/css/apexcharts.css">

    </head>

    <body>

        <!-- Header START -->
        <%- include('./includes/navigation.ejs') %>
            <!-- Header END -->

            <!-- **************** MAIN CONTENT START **************** -->
            <main>

                <!-- =======================
    Page Banner START -->
                <%- include('./includes/main.ejs')%>

                    <!-- Main content START -->
                    <div class="col-xl-9">

                        <!-- Counter boxes START -->
                        <div class="row g-4">
                            <!-- Counter item -->
                            <div class="col-sm-6 col-lg-4">
                                <div
                                    class="d-flex justify-content-center align-items-center p-4 bg-warning bg-opacity-15 rounded-3">
                                    <span class="display-6 text-warning mb-0"><i class="fas fa-tv fa-fw"></i></span>
                                    <div class="ms-4">
                                        <div class="d-flex">
                                            <h5 class="purecounter mb-0 fw-bold" data-purecounter-start="0"
                                                data-purecounter-end="25" data-purecounter-delay="200">0</h5>
                                        </div>
                                        <span class="mb-0 h6 fw-light">Total Courses</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Counter item -->
                            <div class="col-sm-6 col-lg-4">
                                <div
                                    class="d-flex justify-content-center align-items-center p-4 bg-purple bg-opacity-10 rounded-3">
                                    <span class="display-6 text-purple mb-0"><i
                                            class="fas fa-user-graduate fa-fw"></i></span>
                                    <div class="ms-4">
                                        <div class="d-flex">
                                            <h5 class="purecounter mb-0 fw-bold" data-purecounter-start="0"
                                                data-purecounter-end="25" data-purecounter-delay="200">0</h5>
                                            <span class="mb-0 h5">K+</span>
                                        </div>
                                        <span class="mb-0 h6 fw-light">Total Students</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Counter item -->
                            <div class="col-sm-6 col-lg-4">
                                <div
                                    class="d-flex justify-content-center align-items-center p-4 bg-info bg-opacity-10 rounded-3">
                                    <span class="display-6 text-info mb-0"><i class="fas fa-gem fa-fw"></i></span>
                                    <div class="ms-4">
                                        <div class="d-flex">
                                            <h5 class="purecounter mb-0 fw-bold" data-purecounter-start="0"
                                                data-purecounter-end="12" data-purecounter-delay="300">0</h5>
                                            <span class="mb-0 h5">K</span>
                                        </div>
                                        <span class="mb-0 h6 fw-light">Enrolled Students</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Counter boxes END -->

                        <% if(role === 'teacher'){ %> <h1 class="mt-5">Added Session</h1><% }else{%>
                            <h1 class="mt-5">Upcoming Session </h1>
                        <% } %>
                        <!-- Chart START -->
                        <% if(role === 'student'){ %>
                        <div class="row g-4 mt-2">
                            <% sessions.forEach((item)=>{%>
                                <div class="col-sm-6 col-lg-4">
                                    <div
                                        class="d-flex justify-content-center align-items-center p-4 bg-warning bg-opacity-15 rounded-3">
                                        
                                            <div class="ms-4">
                                                <div class="d-flex">
                                                    <h5>Time: <%= item.sessionDetail.start_time %> - <%= item.sessionDetail.end_time %>
                                                    </h5><br>
                                                </div>
                                                <h6>Date: <%= item.sessionDetail.date %></h6>
                                                <h6>Price : <%= item.sessionDetail.price %></h6>
                                                <span class="mb-0 h6 fw-light"></span>
                                            <div class="d-flex">

                                            <% if(role === 'teacher'){ %>
                                            <form class="m-1" action="/user/edit-session" method = 'get'>
                                                <input type="hidden" value="<%= item._id %>" name="sessionId">
                                                <button class="btn btn-secondary" type="submit">Edit</button>
                                            </form>
                                            <form class="m-1" action="/user/delete-session" method = 'post'>
                                                <input type="hidden" value="<%= item._id %>" name="sessionId">
                                                <button class="btn btn-danger" type="submit">Delete</button>
                                            </form>
                                            <% } %>

                                        <h4>Tutor : <a href="/user/<%= item.TutorDetails.username %>" class="text-primary"><%= item.TutorDetails.username %> </a></h4>
                                        </div>
                                            </div>

                                        </form>
                                    </div>
                                </div>
                                <% })%>
                                    <!-- Counter item -->

                        </div><% }else{%>
                            <div class="row g-4 mt-2">
                                <% sessions.forEach((item)=>{%>
                                    <div class="col-sm-6 col-lg-4">
                                        <div
                                            class="d-flex justify-content-center align-items-center p-4 bg-warning bg-opacity-15 rounded-3">
                                            
                                                <div class="ms-4">
                                                    <div class="d-flex">
                                                        <h5>Time: <%= item.start_time %> - <%= item.end_time %>
                                                        </h5><br>
                                                    </div>
                                                    <h6>Date: <%= item.date %></h6>
                                                    <h6>Price : <%= item.price %></h6>
                                                    <span class="mb-0 h6 fw-light"></span>
                                                <div class="d-flex">
                                                <form class="m-1" action="/user/edit-session" method = 'get'>
                                                    <input type="hidden" value="<%= item._id %>" name="sessionId">
                                                    <button class="btn btn-secondary" type="submit">Edit</button>
                                                </form>
                                                <form class="m-1" action="/user/delete-session" method = 'post'>
                                                    <input type="hidden" value="<%= item._id %>" name="sessionId">
                                                    <!-- <h1><%= (item.isAvailable === false && (currentHour < Number(item.end_time[0] + item.end_time[1] ) && item.date <= currentDate)) %> </h1> -->
                                                <% if(item.isAvailable === false && (currentHour < Number(item.end_time[0] + item.end_time[1] ) && item.date <= currentDate)){ %>
                                                        <button class="btn btn-danger" type="submit" disabled>Already Booked</button>
                                                    <% }else{ %> 
                                                        <button class="btn btn-danger" type="submit">Delete</button>
                                                    <% } %>
                                                </form>
                                                
                                            </div>
                                                </div>
    
                                            </form>
                                        </div>
                                    </div>
                                    <% })%>
                                        <!-- Counter item -->
    
                            </div>
                        <% } %>



                    </div>
                    </div>
                    </div>
                    <!-- Chart END -->

                    <!-- Course List table START -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card border rounded-3 mt-5">
                                <!-- Card header START -->
                                <!-- <div class="card-header border-bottom">
                                    <div class="d-sm-flex justify-content-sm-between align-items-center">
                                        <h3 class="mb-2 mb-sm-0">Most Selling Courses</h3>
                                        <a href="#" class="btn btn-sm btn-primary-soft mb-0">View all</a>
                                    </div>
                                </div> -->
                                <!-- Card header END -->

                                <!-- Card body START -->

                                <!-- Card body START -->
                            </div>
                        </div>
                    </div>
                    <!-- Course List table END -->
                    </div>
                    <!-- Main content END -->
                    </div><!-- Row END -->
                    </div>
                    </section>
                    <!-- =======================
    Page content END -->

            </main>
            <!-- **************** MAIN CONTENT END **************** -->

            <!-- =======================
Footer START -->
            <%- include('./includes/footer') -%>
                <!-- =======================
Footer END -->

                <!-- Back to top -->
                <div class="back-top"><i
                        class="bi bi-arrow-up-short position-absolute top-50 start-50 translate-middle"></i></div>

                <!-- Bootstrap JS -->
                <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

                <!-- Vendors -->
                <script src="assets/vendor/purecounterjs/dist/purecounter_vanilla.js"></script>
                <script src="assets/vendor/apexcharts/js/apexcharts.min.js"></script>

                <!-- Template Functions -->
                <script src="assets/js/functions.js"></script>

    </body>

    </html>